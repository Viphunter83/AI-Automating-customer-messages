# üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase REST API

**–ü—Ä–æ–µ–∫—Ç:** Neiromatrius  
**–î–∞—Ç–∞:** 8 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫–∞

**–ó–∞–∫–∞–∑—á–∏–∫ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —á–µ—Ä–µ–∑ Supabase REST API, –∞ –Ω–µ –ø—Ä—è–º–æ–µ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.**

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ø—Ä—è–º–æ–µ PostgreSQL)

```
Backend ‚Üí SQLAlchemy ORM ‚Üí asyncpg ‚Üí PostgreSQL (Supabase)
```

### –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (REST API)

```
Backend ‚Üí Supabase Python Client ‚Üí HTTP REST API ‚Üí Supabase
```

---

## üîß –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase Python Client

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ requirements.txt
supabase==2.0.0
postgrest==0.13.0
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ Supabase

–°–æ–∑–¥–∞—Ç—å `backend/app/utils/supabase_adapter.py`:
- –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Supabase Python Client
- –≠–º—É–ª—è—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ SQLAlchemy Session
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (SELECT, INSERT, UPDATE, DELETE)

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í `backend/app/config.py`:
- –£–±—Ä–∞—Ç—å `DATABASE_URL`
- –î–æ–±–∞–≤–∏—Ç—å `SUPABASE_URL`
- –î–æ–±–∞–≤–∏—Ç—å `SUPABASE_SERVICE_KEY` (–¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–ó–∞–º–µ–Ω–∏—Ç—å SQLAlchemy –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ Supabase REST API –≤—ã–∑–æ–≤—ã:
- `MessageProcessingService`
- `SearchService`
- `ReminderService`
- `DialogService`
- –ò –¥—Ä—É–≥–∏–µ...

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ó–∞–º–µ–Ω–∏—Ç—å `get_session()` –Ω–∞ `get_supabase_client()`

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è REST API

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è:**

1. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** REST API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–∞–∫ SQLAlchemy
2. **JOIN –∑–∞–ø—Ä–æ—Å—ã:** –ù—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgREST —Ñ–∏–ª—å—Ç—Ä—ã
3. **–°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:** –ú–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–∏–∫–∏
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** REST API –º–µ–¥–ª–µ–Ω–Ω–µ–µ –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è:**

1. ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ REST API
2. ‚úÖ PostgREST –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç API –∏–∑ —Å—Ö–µ–º—ã
3. ‚úÖ Row Level Security (RLS) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
4. ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —á–µ—Ä–µ–∑ Supabase Realtime (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìù –í–æ–ø—Ä–æ—Å—ã –∫ –∑–∞–∫–∞–∑—á–∏–∫—É

1. **–ü–æ—á–µ–º—É —Ç—Ä–µ–±—É–µ—Ç—Å—è REST API –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è?**
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å?
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã?
   - –î—Ä—É–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è?

2. **–ö–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã?**
   - –ù—É–∂–Ω—ã –ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏?
   - –ù—É–∂–Ω—ã –ª–∏ —Å–ª–æ–∂–Ω—ã–µ JOIN –∑–∞–ø—Ä–æ—Å—ã?
   - –ö–∞–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä–µ–±—É–µ—Ç—Å—è?

3. **–ï—Å—Ç—å –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Service Key?**
   - –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Key –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞?
   - –ò–ª–∏ –Ω—É–∂–µ–Ω Anon Key —Å RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏?

---

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ REST API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü–ª—é—Å—ã:**
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –∑–∞–∫–∞–∑—á–∏–∫–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Supabase Python Client
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RLS –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚ö†Ô∏è –ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REST API –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –£—Å–ª–æ–∂–Ω—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∑–∞–∫–∞–∑—á–∏–∫–∞

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Supabase REST API

- [Supabase Python Client](https://github.com/supabase/supabase-py)
- [PostgREST API](https://postgrest.org/)
- [Supabase REST API Docs](https://supabase.com/docs/reference/python/introduction)

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 8 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫–∞







