# ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Railway API

**–î–∞—Ç–∞:** 2025-11-27  
**Railway URL:** https://ai-automating-customer-messages-production.up.railway.app

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. ‚úÖ Health Check (`/health`)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "app_name": "AI Customer Support",
  "version": "1.0.0"
}
```

### 2. ‚úÖ Full Health Check (`/health/full`)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è Degraded (–æ–∂–∏–¥–∞–µ–º–æ)

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "degraded",
  "checks": {
    "database": {
      "status": "healthy"
    },
    "openai": {
      "status": "healthy"
    },
    "webhook": {
      "status": "degraded",
      "configured": false
    }
  },
  "app_name": "AI Customer Support",
  "version": "1.0.0"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°—Ç–∞—Ç—É—Å "degraded" –æ–∂–∏–¥–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ webhook –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).

### 3. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`POST /api/messages/`)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "client_id": "test_client_1735296569",
  "content": "–ü—Ä–∏–≤–µ—Ç! –ú–Ω–µ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "original_message_id": "3650cfb7-7539-4895-8bab-7e3095b60984",
  "is_first_message": true,
  "priority": "low",
  "escalation_reason": null,
  "classification": {
    "scenario": "GREETING",
    "confidence": 0.85,
    "id": "3231d422-be65-4f53-8a7a-a8bf85d22e88",
    "reasoning": "–ö–ª–∏–µ–Ω—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∑–∞ –ø–æ–º–æ—â—å—é, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—Ä–≤–æ–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ."
  },
  "response": {
    "message_id": "70c1d621-ea36-4193-af3c-bb1b0cb2e774",
    "text": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã –†–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å.\n\n–Ø –ø–æ–º–æ—â–Ω–∏–∫ –ø–µ—Ä–≤–æ–π –ª–∏–Ω–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –ß–µ–º —è –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å?",
    "type": "bot_auto"
  },
  "webhook": {
    "success": false,
    "error": "All connection attempts failed",
    "note": "Message was saved successfully, but webhook failed"
  }
}
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ
- ‚úÖ AI –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ `GREETING` —Å confidence `0.85`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç —Å–æ–∑–¥–∞–Ω
- ‚ö†Ô∏è Webhook –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–æ–∂–∏–¥–∞–µ–º–æ, —Ç–∞–∫ –∫–∞–∫ webhook URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

---

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚úÖ
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞** ‚úÖ
3. **OpenAI API —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚úÖ
4. **AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚úÖ
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è** ‚úÖ

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥** - —Å–æ–∑–¥–∞–Ω `.env.production.local` —Å Railway URL
2. üîÑ **–î–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ Vercel** - —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥
3. ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel** - –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

**Railway API –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

