# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ null –∑–Ω–∞—á–µ–Ω–∏–π

**–î–∞—Ç–∞:** 2025-11-27  
**–§–∞–π–ª:** `frontend/hooks/useMessages.ts`

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–¥ —è–≤–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª `null` –≤ `undefined` –¥–ª—è –ø–æ–ª–µ–π `escalation_reason` –∏ `reasoning`, —á—Ç–æ:

1. **–ò–∑–º–µ–Ω—è–ª–æ —Å–µ–º–∞–Ω—Ç–∏–∫—É –¥–∞–Ω–Ω—ã—Ö** - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` –∫–∞–∫ –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
2. **–°–æ–∑–¥–∞–≤–∞–ª–æ –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –¥—Ä—É–≥–∏–µ nullable –ø–æ–ª—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å —Ç–∞–∫ –∂–µ
3. **–ë—ã–ª–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ** - spread operator —É–∂–µ –≤–∫–ª—é—á–∞–ª —ç—Ç–∏ –ø–æ–ª—è, —è–≤–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω—è–ª–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è
4. **–ú–æ–≥–ª–æ —Å–ª–æ–º–∞—Ç—å downstream –∫–æ–¥** - –∫–æ–¥, –æ–∂–∏–¥–∞—é—â–∏–π `null` –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–ª—É—á–∞–ª `undefined`

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–£–±—Ä–∞–Ω–∞ —è–≤–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `null` –≤ `undefined`. –¢–µ–ø–µ—Ä—å:

- ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å - –µ—Å–ª–∏ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`, –æ–Ω–æ –æ—Å—Ç–∞–µ—Ç—Å—è `null`
- ‚úÖ TypeScript —Ç–∏–ø—ã —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `null`:
  - `escalation_reason?: EscalationReason | null`
  - `reasoning?: string | null`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
- ‚úÖ –°–µ–º–∞–Ω—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –î–æ:
```typescript
const combined: MessageWithClassification[] = messages.map((msg) => {
  const classification = classifications.find((c) => c.message_id === msg.id);
  return {
    ...msg,
    escalation_reason: msg.escalation_reason ?? undefined, // Convert null to undefined
    classification: classification ? {
      ...classification,
      reasoning: classification.reasoning ?? undefined // Convert null to undefined
    } : undefined
  };
})
```

### –ü–æ—Å–ª–µ:
```typescript
const combined: MessageWithClassification[] = messages.map((msg) => {
  const classification = classifications.find((c) => c.message_id === msg.id);
  return {
    ...msg,
    classification: classification || undefined
  };
})
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

- ‚úÖ TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤: –£—Å–ø–µ—à–Ω–æ
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä: –ù–µ—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –¢–∏–ø—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `null`: –î–∞ (`escalation_reason?: EscalationReason | null`, `reasoning?: string | null`)

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ö–æ–¥ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–µ–º–∞–Ω—Ç–∏–∫—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `null` –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º —Å API, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!** ‚úÖ

