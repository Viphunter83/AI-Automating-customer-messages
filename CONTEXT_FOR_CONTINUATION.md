# üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–æ–µ–∫—Ç:** AI –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:** 1 –¥–µ–∫–∞–±—Ä—è 2025  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 1 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0

---

## üéØ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–≤–æ–π –ª–∏–Ω–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ –±–∞–∑–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —ç—Å–∫–∞–ª–∞—Ü–∏–∏ –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é OpenAI GPT-4o-mini
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏—è–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–∞–º
- –ü–∞–Ω–µ–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞–º–∏

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
AI Automating customer messages/
‚îú‚îÄ‚îÄ api/                    # Vercel serverless —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ç–∫–µ–Ω–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ index.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è FastAPI –Ω–∞ Vercel
‚îú‚îÄ‚îÄ backend/               # FastAPI –±—ç–∫–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic Settings)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py     # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dependencies.py # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/    # Middleware (security, logging)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/        # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/        # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/         # –£—Ç–∏–ª–∏—Ç—ã (cache, logger, prompts)
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ migrations/        # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ tests/             # –¢–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt   # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ frontend/              # Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ app/               # Next.js App Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ components/        # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ hooks/             # React hooks
‚îÇ   ‚îú‚îÄ‚îÄ lib/               # –£—Ç–∏–ª–∏—Ç—ã –∏ API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ public/            # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ docker-compose.yml     # Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ vercel.json            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
‚îú‚îÄ‚îÄ railway.toml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway
‚îî‚îÄ‚îÄ *.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**Backend:**
- Python 3.10.11 (—É–∫–∞–∑–∞–Ω–æ –≤ `runtime.txt`)
- FastAPI 0.104.1
- SQLAlchemy 2.0.23 (async)
- Alembic 1.13.0 (–º–∏–≥—Ä–∞—Ü–∏–∏)
- PostgreSQL (asyncpg 0.29.0)
- Redis 5.0.1 (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫—ç—à, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- OpenAI API (—á–µ—Ä–µ–∑ ProxyAPI –¥–ª—è –†–§)
- APScheduler 3.10.4 (–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á)
- WebSocket (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)
- Python-JOSE 3.3.0 (JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- Passlib 1.7.4 (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π)

**Frontend:**
- Next.js 14.2.33
- TypeScript 5.3.0
- React 18.2.0
- React Query (@tanstack/react-query 5.0.0)
- Zod 3.22.0 (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- Tailwind CSS 3.3.0
- Axios 1.6.0

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- Railway (PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- Vercel (Frontend + Backend serverless)
- Docker (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

---

## üîß –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–ø–ª–æ—è

### Railway (Backend + PostgreSQL)

**URL:** `ai-automating-customer-messages-production.up.railway.app`

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- –§–∞–π–ª: `railway.toml`
- Start command: `cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT`
- Python –≤–µ—Ä—Å–∏—è: 3.10.11 (–∏–∑ `runtime.txt`)

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Railway):**
```
DATABASE_URL=postgresql+asyncpg://postgres:PASSWORD@HOST:PORT/railway
OPENAI_API_KEY=sk-...
SECRET_KEY=your-secret-key-minimum-32-characters-long
OPENAI_API_BASE=https://api.proxyapi.ru/openai/v1
OPENAI_MODEL=gpt-4o-mini
REDIS_URL=redis://HOST:PORT/0  # Optional, falls back to in-memory cache if not available
ALLOWED_ORIGINS=https://frontend-zeta-taupe-21.vercel.app,https://frontend-qawc41iml-olegs-projects-d32cda90.vercel.app,http://localhost:3000,http://localhost:8000
DEBUG=False
LOG_LEVEL=INFO
```

**–í–∞–∂–Ω–æ:** 
- `ALLOWED_ORIGINS` –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `*.vercel.app` (wildcard), —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `allow_credentials=True` –≤ CORS
- –ù—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### Vercel (Frontend + Backend Serverless)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `vercel.json`

```json
{
  "version": 2,
  "buildCommand": "cd frontend && npm run build",
  "outputDirectory": "frontend/.next",
  "framework": "nextjs",
  "installCommand": "cd frontend && npm install",
  "rewrites": [
    {
      "source": "/api/:path*",
      "destination": "/api/index.py"
    }
  ],
  "functions": {
    "api/index.py": {
      "runtime": "python3.10",
      "memory": 1024,
      "maxDuration": 30
    }
  }
}
```

**–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- `rewrites` destination –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø—É—Ç–µ–º –≤ `functions` (`/api/index.py`)
- `buildCommand` –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `npm install` (—ç—Ç–æ –¥–µ–ª–∞–µ—Ç `installCommand`)
- Backend –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `api/index.py`, –∫–æ—Ç–æ—Ä—ã–π –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç FastAPI app –∏–∑ `backend/main.py`

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Vercel):**
```
NEXT_PUBLIC_API_URL=https://ai-automating-customer-messages-production.up.railway.app
DATABASE_URL=postgresql+asyncpg://...
OPENAI_API_KEY=sk-...
SECRET_KEY=...
REDIS_URL=redis://...  # Optional, falls back to in-memory cache
```

**`.vercelignore`:**
- –ò—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã (–º–∏–≥—Ä–∞—Ü–∏–∏, —Ç–µ—Å—Ç—ã, —Å–∫—Ä–∏–ø—Ç—ã)
- –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–¥, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è `api/index.py`

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Backend API (Railway)**
   - ‚úÖ –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
   - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
   - ‚úÖ AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ ProxyAPI
   - ‚úÖ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
   - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á (APScheduler) —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ Health checks —Ä–∞–±–æ—Ç–∞—é—Ç

2. **Frontend (Vercel)**
   - ‚úÖ –î–µ–ø–ª–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ –ü–∞–Ω–µ–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (`/dashboard`)
   - ‚úÖ –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/demo`)
   - ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (`/integration-guide`)
   - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Railway backend —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
   - ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π AI
   - ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
   - ‚úÖ –≠—Å–∫–∞–ª–∞—Ü–∏—è –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º
   - ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏
   - ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
   - ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º

### ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

1. **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   - –ü—Ä–æ–±–ª–µ–º–∞: Wildcard `*.vercel.app` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `allow_credentials=True`
   - –†–µ—à–µ–Ω–∏–µ: –£–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤ `ALLOWED_ORIGINS`

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è datetime –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ**
   - –ü—Ä–æ–±–ª–µ–º–∞: Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç datetime –±–µ–∑ timezone (`2025-12-01T06:51:37.755262`)
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π Zod validator `datetimeString` –≤ `frontend/lib/validation.ts`

3. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**
   - –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –Ω–µ –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ
   - –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `created_at` –≤ `ChatHistory.tsx`

4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–π**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—è –æ—Ç–≤–µ—Ç—ã –±–æ—Ç–∞
   - –†–µ—à–µ–Ω–∏–µ: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å `message_type === 'user'`

5. **Vercel –¥–µ–ø–ª–æ–π**
   - –ü—Ä–æ–±–ª–µ–º–∞: Vercel –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª `app` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é Next.js
   - –†–µ—à–µ–Ω–∏–µ: –£–∫–∞–∑–∞–Ω `buildCommand` –∏ `outputDirectory` —Å –ø—É—Ç–µ–º `frontend/`

---

## üîë –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### Backend

**`backend/app/routes/messages.py`** (~330 —Å—Ç—Ä–æ–∫)
- –ì–ª–∞–≤–Ω—ã–π endpoint –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (`POST /api/messages/`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- –í–∫–ª—é—á–∞–µ—Ç:
  - –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—É—é —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
  - Rate limiting
  - –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
  - Background tasks –¥–ª—è webhooks

**`backend/app/services/message_processing_service.py`**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è AI
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç—Å–∫–∞–ª–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

**`backend/app/services/message_response_service.py`**
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏
- –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

**`backend/app/services/message_delivery_service.py`**
- –î–æ—Å—Ç–∞–≤–∫–∞ —á–µ—Ä–µ–∑ webhooks
- WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Background tasks

**`backend/app/services/ai_classifier.py`**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI API
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**`backend/app/services/response_manager.py`**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

**`backend/app/services/escalation_manager.py`**
- –õ–æ–≥–∏–∫–∞ —ç—Å–∫–∞–ª–∞—Ü–∏–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–∞—Å—Å–æ–≤—ã—Ö —Å–±–æ–µ–≤

**`backend/app/config.py`**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic Settings
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ CORS, rate limiting, AI, Redis

**`backend/app/auth/`**
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- `jwt.py` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- `dependencies.py` - FastAPI dependencies –¥–ª—è –∑–∞—â–∏—Ç—ã endpoints
- `routes/auth.py` - endpoints –¥–ª—è –ª–æ–≥–∏–Ω–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤

**`backend/app/utils/redis_cache.py`**
- Redis cache —Å fallback –Ω–∞ in-memory cache
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis

**`backend/app/__init__.py`**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Middleware (CORS, security, logging)
- Rate limiting (slowapi)
- Startup/shutdown —Å–æ–±—ã—Ç–∏—è

### Frontend

**`frontend/lib/api.ts`**
- Axios –∫–ª–∏–µ–Ω—Ç –¥–ª—è API
- Interceptors –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (Zod)
- WebSocket URL —Å–æ–∑–¥–∞–Ω–∏–µ

**`frontend/lib/validation.ts`**
- Zod —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ API –æ—Ç–≤–µ—Ç–æ–≤
- –ö–∞—Å—Ç–æ–º–Ω—ã–π `datetimeString` validator

**`frontend/components/ChatHistory.tsx`**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–π —Ç–æ–ª—å–∫–æ –¥–ª—è user —Å–æ–æ–±—â–µ–Ω–∏–π

**`frontend/app/dashboard/page.tsx`**
- –ü–∞–Ω–µ–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
- –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –¥–∏–∞–ª–æ–≥–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫

**`frontend/app/demo/page.tsx`**
- –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ mock —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**`vercel.json`**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ Vercel
- Build –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- Rewrites –¥–ª—è API
- Functions –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Python

**`railway.toml`**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ Railway
- Start command –¥–ª—è backend

**`.vercelignore`**
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Vercel –¥–µ–ø–ª–æ—è
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone https://github.com/Viphunter83/AI-Automating-customer-messages.git
   cd "AI Automating customer messages"
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   ```bash
   cp backend/.env.example backend/.env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å backend/.env —Å –≤–∞—à–∏–º–∏ –∫–ª—é—á–∞–º–∏
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose**
   ```bash
   docker-compose up
   ```
   - Frontend: http://localhost:3000
   - Backend: http://localhost:8000
   - API Docs: http://localhost:8000/docs

### –î–µ–ø–ª–æ–π –Ω–∞ Railway

1. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway**
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Python –ø—Ä–æ–µ–∫—Ç

2. **–î–æ–±–∞–≤–∏—Ç—å PostgreSQL**
   - –í Railway Dashboard: New ‚Üí Database ‚Üí PostgreSQL
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `DATABASE_URL` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ë–î

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - Settings ‚Üí Variables
   - –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Å–µ–∫—Ü–∏–∏ "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Railway)"

4. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏**
   ```bash
   railway run alembic upgrade head
   ```
   –ò–ª–∏ —á–µ—Ä–µ–∑ Railway Dashboard: Deploy ‚Üí Run Command ‚Üí `cd backend && alembic upgrade head`

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π**
   ```bash
   curl https://ai-automating-customer-messages-production.up.railway.app/health
   ```

### –î–µ–ø–ª–æ–π –Ω–∞ Vercel

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   - Vercel Dashboard ‚Üí New Project
   - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - Settings ‚Üí Environment Variables
   - –î–æ–±–∞–≤–∏—Ç—å `NEXT_PUBLIC_API_URL` (Railway backend URL)
   - –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

3. **–î–µ–ø–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π**
   - –ü—Ä–∏ push –≤ `main` –≤–µ—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–µ–ø–ª–æ–π
   - –ò–ª–∏ —á–µ—Ä–µ–∑ CLI: `vercel --prod`

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π**
   - –û—Ç–∫—Ä—ã—Ç—å URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ backend

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Backend —Ç–µ—Å—Ç—ã

```bash
cd backend
pytest tests/ -v
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:**
- `test_ai_classifier.py` - —Ç–µ—Å—Ç—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `test_response_manager.py` - —Ç–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- `test_text_processor.py` - —Ç–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞
- `test_search_export.py` - —Ç–µ—Å—Ç—ã –ø–æ–∏—Å–∫–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
- `test_admin.py` - —Ç–µ—Å—Ç—ã admin endpoints

### Frontend –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

```bash
cd frontend
npm run type-check
```

### E2E —Ç–µ—Å—Ç—ã

```bash
./test_e2e.sh
```

### Health checks

```bash
# Basic health
curl https://ai-automating-customer-messages-production.up.railway.app/health

# Full health check
curl https://ai-automating-customer-messages-production.up.railway.app/health/full

# Database health
curl https://ai-automating-customer-messages-production.up.railway.app/health/db

# OpenAI health
curl https://ai-automating-customer-messages-production.up.railway.app/health/openai
```

---

## üìù –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

–í `backend/app/routes/messages.py` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:
- –ü–æ `client_id`, `content`, `timestamp` (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 5 —Å–µ–∫—É–Ω–¥)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `X-Idempotency-Key` header
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –¥—É–±–ª–∏–∫–∞—Ç–µ

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î –≤ `create_message` –æ–±–µ—Ä–Ω—É—Ç—ã –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é:
```python
async with session.begin():
    # –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
    # Webhook –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞
```

### Rate Limiting

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `slowapi`:
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π: 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `config.py`)
- Per IP –∞–¥—Ä–µ—Å
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫: `_rate_limit_exceeded_handler`

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- **AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:** TTL 5 –º–∏–Ω—É—Ç (`cache_ttl_classifications`)
- **–®–∞–±–ª–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤:** TTL 1 —á–∞—Å (`cache_ttl_templates`)
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `backend/app/utils/cache.py`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å `request_id` (correlation ID)
- –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è –≤ –ª–æ–≥–∞—Ö (`SecretMaskingFilter`)
- Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### WebSocket

- Endpoint: `/ws`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `backend/app/routes/ws.py`

### –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

- APScheduler –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (`reminder_scheduler.py`)
- –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤ (`dialog_auto_close.py`)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ `startup` —Å–æ–±—ã—Ç–∏–∏ FastAPI

---

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**Backend:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `python-json-logger`
- –£—Ä–æ–≤–Ω–∏: DEBUG, INFO, WARNING, ERROR
- Correlation ID –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

**Frontend:**
- Console –ª–æ–≥–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

### Health Checks

**Endpoints:**
- `/health` - –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- `/health/db` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
- `/health/openai` - –ø—Ä–æ–≤–µ—Ä–∫–∞ OpenAI API
- `/health/webhook` - –ø—Ä–æ–≤–µ—Ä–∫–∞ webhook
- `/health/scheduler` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- `/health/full` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Railway

- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Railway Dashboard
- –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –¥–µ–ø–ª–æ–µ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Vercel

- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Vercel Dashboard
- Analytics –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- Function logs –¥–ª—è serverless —Ñ—É–Ω–∫—Ü–∏–π

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **WebSocket –Ω–∞ Vercel**
   - WebSocket endpoints –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ Vercel serverless —Ñ—É–Ω–∫—Ü–∏—è—Ö
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway –¥–ª—è backend —Å WebSocket –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å

2. **APScheduler –Ω–∞ Vercel**
   - APScheduler –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ serverless —Ñ—É–Ω–∫—Ü–∏—è—Ö
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vercel Cron Jobs –∏–ª–∏ Railway –¥–ª—è backend

3. **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ Vercel**
   - Read-only —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3, Supabase Storage)

4. **–¢–∞–π–º–∞—É—Ç—ã**
   - Vercel Functions: –º–∞–∫—Å–∏–º—É–º 30 —Å–µ–∫—É–Ω–¥ (Hobby –ø–ª–∞–Ω)
   - Railway: –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `README.md` - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- `SETUP.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- `DEPLOYMENT.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
- `PROJECT_STATUS_FOR_CLIENT.md` - —Å—Ç–∞—Ç—É—Å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
- `–û–¢–ß–ï–¢_–î–õ–Ø_–ó–ê–ö–ê–ó–ß–ò–ö–ê.md` - –æ—Ç—á–µ—Ç –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞
- `VERCEL_SETUP_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Vercel
- `RAILWAY_SETUP.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Railway
- `INTEGRATION_CRM_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å CRM

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- Swagger UI: `https://ai-automating-customer-messages-production.up.railway.app/docs`
- ReDoc: `https://ai-automating-customer-messages-production.up.railway.app/redoc`

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è N+1 –∑–∞–ø—Ä–æ—Å–æ–≤ (—á–∞—Å—Ç–∏—á–Ω–æ —Å–¥–µ–ª–∞–Ω–æ)
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

2. **–£–ª—É—á—à–µ–Ω–∏–µ UI/UX**
   - –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (—á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)
   - –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
   - –£–ª—É—á—à–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
   - E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏

2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - CRM —Å–∏—Å—Ç–µ–º—ã
   - –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
   - –î—Ä—É–≥–∏–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)

1. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**
   - –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
   - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤

2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
   - CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - Pydantic —Å—Ö–µ–º—ã –Ω–∞ backend
   - Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ frontend
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è HTML/—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

2. **–ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫**
   - SQL injection –∑–∞—â–∏—Ç–∞ (SQLAlchemy ORM)
   - XSS –∑–∞—â–∏—Ç–∞ (html_escape –≤ Pydantic)
   - Rate limiting
   - CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

3. **–°–µ–∫—Ä–µ—Ç—ã**
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
   - –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   pip list --outdated
   npm outdated
   ```

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –≤–µ–∑–¥–µ**

4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å security advisors**
   - Railway: Security advisors –≤ Dashboard
   - Vercel: Security tab –≤ Settings

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Git

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
git status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git log --oneline -10

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É
git checkout -b feature/new-feature

# –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin feature/new-feature
```

### Docker

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
docker-compose build --no-cache

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f backend
```

### Backend

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
cd backend
uvicorn main:app --reload

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
pytest tests/ -v

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black backend/app
isort backend/app
```

### Frontend

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd frontend
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
npm run dev

# –°–æ–±—Ä–∞—Ç—å –¥–ª—è production
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã
npm run type-check

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint
```

### Railway

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CLI
npm i -g @railway/cli

# –í–æ–π—Ç–∏
railway login

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É
railway link

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
railway logs

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
railway run alembic upgrade head

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
railway open
```

### Vercel

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CLI
npm i -g vercel

# –í–æ–π—Ç–∏
vercel login

# –î–µ–ø–ª–æ–π preview
vercel

# –î–µ–ø–ª–æ–π production
vercel --prod

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
vercel logs
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- GitHub: https://github.com/Viphunter83/AI-Automating-customer-messages

### –î–µ–ø–ª–æ–π
- Railway: https://railway.app
- Vercel: https://vercel.com

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- FastAPI: https://fastapi.tiangolo.com
- Next.js: https://nextjs.org/docs
- Vercel: https://vercel.com/docs
- Railway: https://docs.railway.app

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [ ] –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (Docker Compose)
- [ ] –ò–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (Swagger)
- [ ] –ò–∑—É—á–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints –≤ `backend/app/routes/messages.py`
- [ ] –ü–æ–Ω—è—Ç—å flow –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ ‚Üí –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí –æ—Ç–≤–µ—Ç)
- [ ] –ò–∑—É—á–∏—Ç—å frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å IDE (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è VS Code —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ –¥–ª—è Python –∏ TypeScript)

---

## üéì –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

1. **FastAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - https://fastapi.tiangolo.com/tutorial/
   - –û—Å–æ–±–µ–Ω–Ω–æ: Dependency Injection, Background Tasks, WebSockets

2. **Next.js –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - https://nextjs.org/docs
   - –û—Å–æ–±–µ–Ω–Ω–æ: App Router, Server Components, API Routes

3. **SQLAlchemy async**
   - https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html

4. **OpenAI API**
   - https://platform.openai.com/docs
   - –û—Å–æ–±–µ–Ω–Ω–æ: Chat Completions API

5. **Vercel Serverless Functions**
   - https://vercel.com/docs/functions/runtimes/python

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 1 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0.0

